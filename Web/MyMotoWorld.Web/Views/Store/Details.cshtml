@model MyMotoWorld.Web.ViewModels.MotorBike.MotorBikeFullInfoViewModel;
@using MyMotoWorld.Common

@{
    this.ViewData["Title"] = "Details";
}

<head>
    <link href="~/css/storeditailscss.css" rel="stylesheet" asp-append-version="true" />
    <link href="https://fonts.googleapis.com/css2?family=Ultra&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<div>
    <p class="text-hide t-5">MoveDown</p>
</div>

<div class="container">

    <div>
        <h1 class="text-center">@Model.Name</h1>
        <h2 class="text-center">@Model.Model</h2>
    </div>

    <div class="thumbnail">
        <img class="card-img" src=@this.Model.MainImagePath alt="bike">
    </div>

    <div class="row justify-content-between">

        <div class="ml-5">
            <h4 class="card-title mt-2">@this.Model.Model @Model.EngineCapacity</h4>
            <p class="card-text text-black-10"><i class="fas fa-euro-sign"></i>@this.Model.Price</p>
        </div>

        <div>
            <ul class="row list-unstyled mt-3">
                @if (Model.AverageVote > 0)
                {
                    <li id="star" class="star-fill ml-2" data-vote="1"><i class="fas fa-star fa-2x" style="color: #e8cd1c"></i></li>
                }
                else
                {
                    <li id="star" class="star-fill ml-2" data-vote="1"><i class="fas fa-star fa-2x"></i></li>
                }

                @if (Model.AverageVote > 1)
                {
                    <li id="star" class="star-fill ml-2" data-vote="2"><i class="fas fa-star fa-2x" style="color: #e8cd1c"></i></li>
                }
                else
                {
                    <li id="star" class="star-fill ml-2" data-vote="2"><i class="fas fa-star fa-2x"></i></li>
                }

                @if (Model.AverageVote > 2)
                {
                    <li id="star" class="star-fill ml-2" data-vote="3"><i class="fas fa-star fa-2x" style="color: #e8cd1c"></i></li>
                }
                else
                {
                    <li id="star" class="star-fill ml-2" data-vote="3"><i class="fas fa-star fa-2x"></i></li>
                }

                @if (Model.AverageVote > 3)
                {
                    <li id="star" class="star-fill ml-2" data-vote="4"><i class="fas fa-star fa-2x" style="color: #e8cd1c"></i></li>
                }
                else
                {
                    <li id="star" class="star-fill ml-2" data-vote="4"><i class="fas fa-star fa-2x"></i></li>
                }

                @if (Model.AverageVote > 4)
                {
                    <li id="star" class="star-fill ml-2" data-vote="5"><i class="fas fa-star fa-2x" style="color: #e8cd1c"></i></li>
                }
                else
                {
                    <li id="star" class="star-fill ml-2" data-vote="5"><i class="fas fa-star fa-2x"></i></li>
                }



                <li class="ml-2"><span id="avarageVoteValue" style="font-size: 25px; font-family: Ultra">@Model.AverageVote.ToString("0.0")</span><span style="font-family: Ultra"> / 5</span> </li>

            </ul>
        </div>

        <div class="mr-5">
            <a class="btn btn-primary btn-lg" asp-area="" asp-controller="Store" asp-action="AddToCart" asp-route-id="@Model.Id">Add to Cart</a>
        </div>

    </div>

    <div class="row justify-content-end">
        @if (!Model.IsAddetToFavorit)
        {
            <a class="nav-link text-dark mr-5" asp-area="" asp-controller="Store" asp-action="AddToFavorite" asp-route-id="@Model.Id">Add To Favorite<i class="fas fa-star ml-1"></i></a>
        }
        else
        {
            <a class="nav-link text-dark mr-5 disabled" asp-area="" asp-controller="Store" asp-action="AddToFavorite" asp-route-id="@Model.Id">Added To Favorite<i class="fas fa-star ml-1" style="color: #e8cd1c"></i></a>
        }

    </div>

    <div class="card-columns mt-5">

        <div class="card mb-3">
            <div class="card-body">
                <h5 class="card-title">SUZUKI PROTECTION PLAN</h5>
                <p class="card-text">
                    Suzuki Protection Plan is a comprehensive plan that covers all major components,
                    parts and electrical/computer systems along with all seals and gaskets and shocks on your Suzuki Motorcycle or ATV.
                    Only normal wear or maintenance items are not covered. We’ve built Suzuki Protection Plan around coverage, not exclusions.
                </p>
                <p class="card-text"><small class="text-muted"></small></p>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <h5 class="card-title text-center">ENGINE</h5>
                <p class="card-text">@Model.EngineName</p>
                <p class="card-text"><small class="text-muted">For Passions</small></p>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <h5 class="card-title text-center">TRANSMISSION</h5>
                <p class="card-text">@Model.Transmission</p>
                <p class="card-text"><small class="text-muted">For Passions</small></p>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <h5 class="card-title text-center">FRONT SUSPENSION</h5>
                <p class="card-text">@Model.FrontSuspension</p>
                <p class="card-text"><small class="text-muted">For Passions</small></p>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <h5 class="card-title text-center">FRONT BREAKS</h5>
                <p class="card-text">@Model.FrontBrakes</p>
                <p class="card-text"><small class="text-muted">For Passions</small></p>
            </div>
        </div>

        <div class="card">
            <img class="card-img" src=/images/bikes/logo.png alt="bike">
        </div>

        <div class="card">
            <div class="card-body">
                <h5 class="card-title text-center">REAR SUSPENSION</h5>
                <p class="card-text">@Model.RearSuspension</p>
                <p class="card-text"><small class="text-muted">For Passions</small></p>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <h5 class="card-title text-center">REAR BRAKES</h5>
                <p class="card-text">@Model.RearBrakes</p>
                <p class="card-text"><small class="text-muted">For Passions</small></p>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <h5 class="card-title text-center">BIKE TYPE</h5>
                <p class="card-text">@Model.BikeType</p>
                <p class="card-text"><small class="text-muted">For Passions</small></p>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <h5 class="card-title text-center">COOLING SYSTEM</h5>
                <p class="card-text">@Model.CoolingSystem</p>
                <p class="card-text"><small class="text-muted">For Passions</small></p>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <h5 class="card-title text-center">ABOUT</h5>
                <p class="card-text">@Model.Descrition</p>
                <p class="card-text"><small class="text-muted">For Passions</small></p>
            </div>
        </div>
    </div>

    <div class="thumbnail">
        <img class="card-img" src=@this.Model.SecondImagePath alt="bike">
    </div>

    <div class="card mb-3">
        <div class="card-body">
            <h5 class="card-title">SUZUKI PROTECTION PLAN</h5>
            <p class="card-text">
                Suzuki Protection Plan is a comprehensive plan that covers all major components,
                parts and electrical/computer systems along with all seals and gaskets and shocks on your Suzuki Motorcycle or ATV.
                Only normal wear or maintenance items are not covered. We’ve built Suzuki Protection Plan around coverage, not exclusions.
            </p>
            <p class="card-text"><small class="text-muted"></small></p>
        </div>
    </div>

    <div class="">
        <hr>

        <div class="embed-responsive embed-responsive-16by9">
            <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/WTbTw0zd2kU" allowfullscreen></iframe>
        </div>
    </div>

</div>

<hr />
<form method="post" id="antiForgeryForm"></form>
@section Scripts{
    <script>

        $("li[data-vote]").each(function (el) {
            $(this).click(function () {
                let vote = $(this).attr("data-vote");
                let value = parseInt(vote);
                let motorBikeId = @Model.Id;
                let antiForgeryToken = $('#antiForgeryForm input[name=__RequestVerificationToken]').val();
                let data = { motorBikeId: motorBikeId, value: value };
                $.ajax({
                    type: "POST",
                    url: "/api/Votes",
                    data: JSON.stringify(data),
                    headers: { 'X-CSRT-TOKEN': antiForgeryToken },
                    success: function (data) {
                        console.log(data);
                        $('#avarageVoteValue').text(data.averageVotes);
                    },
                    contentType: 'application/json',
                });

            })

        });

    </script>
}


